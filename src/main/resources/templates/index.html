<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WhizzRecipe - Find Recipes</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/styles.css">
    <style>

        body {
            background-color: #804b59;
        }

        #recipeCarousel {
            height: 100vh;
            width: 100vw;
            overflow: hidden;
            position: relative;
        }

        .carousel-item img {
            object-fit: cover;
            height: 100%;
            width: 100%;
        }

        @media (max-width: 768px) {
            #recipeCarousel {
                max-width: 100%;
            }

            .carousel-item img {
                max-width: 100%;
                height: auto;
            }
        }

        header nav {
            background-color: #804b59;
            padding: 10px;
        }

        header nav .logo {
            font-size: 24px;
            color: white;
            font-weight: bold;
        }

        .hero {
            text-align: center;
            margin: 50px 0;
        }

        .hero h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
        }

        .hero p {
            font-size: 1.2rem;
            margin-bottom: 20px;
        }

        #recipeResults {
            margin-top: 30px;
        }

        #recipeList {
            list-style-type: none;
            padding: 0;
        }

        #recipeList li {
            margin-bottom: 15px;
            padding: 10px;
            background-color: #804b59;
            border-radius: 5px;
        }
    </style>
</head>
<body>

<header>
    <nav>
        <div class="logo">WhizzRecipe</div>
    </nav>
</header>

<main>
    <div id="recipeCarousel" class="carousel slide" data-bs-ride="carousel">
        <ol class="carousel-indicators">
            <li data-bs-target="#recipeCarousel" data-bs-slide-to="0" class="active"></li>
            <li data-bs-target="#recipeCarousel" data-bs-slide-to="1"></li>
            <li data-bs-target="#recipeCarousel" data-bs-slide-to="2"></li>
            <li data-bs-target="#recipeCarousel" data-bs-slide-to="3"></li>
        </ol>
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="images/pizza.jpg" class="d-block w-100" alt="image of pizza">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Delicious Chicken Recipe</h5>
                    <p>Quick and easy to make</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="images/chicken.jpg" class="d-block w-100" alt="image of chicken pieces">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Vegan Salad</h5>
                    <p>Healthy and refreshing</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="images/naan.jpg" class="d-block w-100" alt="image of naan">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Chocolate Cake</h5>
                    <p>Perfect for dessert lovers</p>
                </div>
            </div>
            <div class="carousel-item">
                <img src="images/noodles.jpg" class="d-block w-100" alt="image of noodles">
                <div class="carousel-caption d-none d-md-block">
                    <h5>Spaghetti Bolognese</h5>
                    <p>A classic Italian dish</p>
                </div>
            </div>
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#recipeCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#recipeCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
        </button>
    </div>

    <section class="hero">
        <h1>Find Recipes with Ingredients You Have</h1>
        <p>Enter the ingredients you have, and we'll find recipes for you!</p>
        <form id="recipeForm" th:action="@{/api/edamam/searchByIngredients}" method="GET" onsubmit="fetchRecipes(); return false;">
            <input type="text" id="ingredients" name="ingredients" placeholder="Enter ingredients..." required>
            <button type="submit">Find Recipes</button>
        </form>
        <section id="recipeResults">
<!--            <h2>Recipes:</h2>-->
            <ul id="recipeList"></ul>
        </section>
    </section>
</main>
<script>
    function fetchRecipes() {
        const ingredients = document.getElementById('ingredients').value;

        fetch(`/api/edamam/searchByIngredients?ingredients=${encodeURIComponent(ingredients)}`)
            .then(response => {
                if (!response.ok) throw new Error("Network response was not ok");
                return response.json();
            })
            .then(data => {
                const recipeList = document.getElementById('recipeList');
                recipeList.innerHTML = ''; // Clear previous results

                if (data.length === 0) {
                    recipeList.innerHTML = '<li>No recipes found.</li>';
                } else {
                    data.forEach(recipe => {
                        const li = document.createElement('li');
                        li.innerHTML = `
                            <strong>${recipe.title}</strong><br>
                            Vegan: ${recipe.vegan ? "Yes" : "No"},<br>
                            Gluten-Free: ${recipe.glutenFree ? "Yes" : "No"},<br>
                            Vegetarian: ${recipe.vegetarian ? "Yes" : "No"}<br>
                            <strong>Diet Labels:</strong> ${recipe.dietLabels.join(', ')}<br>
                            <strong>Health Labels:</strong> ${recipe.healthLabels.join(', ')}<br>
                            <strong>Cautions:</strong> ${recipe.cautions.join(', ')}<br>
                            <strong>Calories:</strong> ${recipe.calories}<br>
                            <strong>Total Weight:</strong> ${recipe.totalWeight} grams<br>
                            <strong>Total Time:</strong> ${recipe.totalTime} minutes<br>
                            <strong>Cuisine Type:</strong> ${recipe.cuisineType.join(', ')}<br>
                            <strong>Meal Type:</strong> ${recipe.mealType.join(', ')}<br>
                            <strong>Dish Type:</strong> ${recipe.dishType.join(', ')}
                        `;
                        recipeList.appendChild(li);
                    });
                }
            })
            .catch(error => {
                console.error('Error fetching recipes:', error);
                alert("Failed to fetch recipes. Please try again later.");
            });
    }
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>



